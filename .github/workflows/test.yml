name: Test Action

on: push

jobs:
  test:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        formula:
          - test-formula-url
          - test-formula-git-revision
        include:
          - formula: test-formula-url
            tag: v0.1.12
          - formula: test-formula-git-revision
            tag: v0.3.3
            revision: c43abd765cf51c06bbcaa5479dc49aab1396989f
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Test
        uses: ./
        with:
          token: ${{secrets.TOKEN}}
          formula: ${{matrix.formula}}
          tap: dawidd6/homebrew-test
          tag: ${{matrix.tag}}
          revision: ${{matrix.revision}}